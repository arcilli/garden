kind: Module
name: frontend
description: Frontend service container
type: container
services:
  - name: frontend
    ports:
      - name: http
        containerPort: 8080
    healthCheck:
      httpGet:
        path: /hello-frontend
        port: http
    ingresses:
      - path: /hello-frontend
        port: http
      - path: /call-backend
        port: http
    dependencies:
      - backend
tests:
  - name: unit
    args: [ npm, test ]

  - name: integ
    command: [ "npm" ]
    args: [ "run", "integ" ]
    dependencies:
      - frontend
#    artifacts:
#      - source: "/app/package.json"
#        target: "./output-artifacts"

  - name: oom
    command: [ "npm" ]
    args: [ "run", "oom" ]
    dependencies:
      - frontend
    memory:
      min: 1000
      max: 1000
#    artifacts:
#      - source: "/app/package.json"
#        target: "./output-artifacts"

  - name: assertion
    command: [ "npm" ]
    args: [ "run", "assertionError" ]
    dependencies:
      - frontend
#    artifacts:
#      - source: "/app/package.json"
#        target: "./output-artifacts"

  - name: runtime
    command: [ "npm" ]
    args: [ "run", "runtimeError" ]
    dependencies:
      - frontend
#    artifacts:
#      - source: "/app/package.json"
#        target: "./output-artifacts"
